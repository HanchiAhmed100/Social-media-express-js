{"version":3,"file":"countdown","sources":["../../../src/js/components/countdown.js"],"sourcesContent":["function plugin(UIkit) {\n\n    if (plugin.installed) {\n        return;\n    }\n\n    var { $, doc, empty, html } = UIkit.util;\n\n    UIkit.component('countdown', {\n\n        mixins: [UIkit.mixin.class],\n\n        attrs: true,\n\n        props: {\n            date: String,\n            clsWrapper: String\n        },\n\n        defaults: {\n            date: '',\n            clsWrapper: '.uk-countdown-%unit%'\n        },\n\n        computed: {\n\n            date({date}) {\n                return Date.parse(date);\n            },\n\n            days({clsWrapper}, $el) {\n                return $(clsWrapper.replace('%unit%', 'days'), $el);\n            },\n\n            hours({clsWrapper}, $el) {\n                return $(clsWrapper.replace('%unit%', 'hours'), $el);\n            },\n\n            minutes({clsWrapper}, $el) {\n                return $(clsWrapper.replace('%unit%', 'minutes'), $el);\n            },\n\n            seconds({clsWrapper}, $el) {\n                return $(clsWrapper.replace('%unit%', 'seconds'), $el);\n            },\n\n            units() {\n                return ['days', 'hours', 'minutes', 'seconds'].filter(unit => this[unit]);\n            }\n\n        },\n\n        connected() {\n            this.start();\n        },\n\n        disconnected() {\n            this.stop();\n            this.units.forEach(unit => empty(this[unit]));\n        },\n\n        events: [\n\n            {\n\n                name: 'visibilitychange',\n\n                el: doc,\n\n                handler() {\n                    if (doc.hidden) {\n                        this.stop();\n                    } else {\n                        this.start();\n                    }\n                }\n\n            }\n\n        ],\n\n        update: {\n\n            write() {\n\n                var timespan = getTimeSpan(this.date);\n\n                if (timespan.total <= 0) {\n\n                    this.stop();\n\n                    timespan.days\n                        = timespan.hours\n                        = timespan.minutes\n                        = timespan.seconds\n                        = 0;\n                }\n\n                this.units.forEach(unit => {\n\n                    var digits = String(Math.floor(timespan[unit]));\n\n                    digits = digits.length < 2 ? `0${digits}` : digits;\n\n                    var el = this[unit];\n                    if (el.textContent !== digits) {\n                        digits = digits.split('');\n\n                        if (digits.length !== el.children.length) {\n                            html(el, digits.map(() => '<span></span>').join(''));\n                        }\n\n                        digits.forEach((digit, i) => el.children[i].textContent = digit);\n                    }\n\n                });\n\n            }\n\n        },\n\n        methods: {\n\n            start() {\n\n                this.stop();\n\n                if (this.date && this.units.length) {\n                    this.$emit();\n                    this.timer = setInterval(() => this.$emit(), 1000);\n                }\n\n            },\n\n            stop() {\n\n                if (this.timer) {\n                    clearInterval(this.timer);\n                    this.timer = null;\n                }\n\n            }\n\n        }\n\n    });\n\n    function getTimeSpan(date) {\n\n        var total = date - Date.now();\n\n        return {\n            total,\n            seconds: total / 1000 % 60,\n            minutes: total / 1000 / 60 % 60,\n            hours: total / 1000 / 60 / 60 % 24,\n            days: total / 1000 / 60 / 60 / 24\n        };\n    }\n\n}\n\nif (!BUNDLED && typeof window !== 'undefined' && window.UIkit) {\n    window.UIkit.use(plugin);\n}\n\nexport default plugin;\n"],"names":["this"],"mappings":";;;;;;;;AAAA,SAAS,MAAM,CAAC,KAAK,EAAE;;IAEnB,IAAI,MAAM,CAAC,SAAS,EAAE;QAClB,OAAO;KACV;;IAED,OAA2B,GAAG,KAAK,CAAC,IAAI;IAAlC,IAAA,CAAC;IAAE,IAAA,GAAG;IAAE,IAAA,KAAK;IAAE,IAAA,IAAI,YAArB;;IAEJ,KAAK,CAAC,SAAS,CAAC,WAAW,EAAE;;QAEzB,MAAM,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC;;QAE3B,KAAK,EAAE,IAAI;;QAEX,KAAK,EAAE;YACH,IAAI,EAAE,MAAM;YACZ,UAAU,EAAE,MAAM;SACrB;;QAED,QAAQ,EAAE;YACN,IAAI,EAAE,EAAE;YACR,UAAU,EAAE,sBAAsB;SACrC;;QAED,QAAQ,EAAE;;YAEN,IAAI,eAAA,CAAC,GAAA,EAAQ;oBAAP,IAAI;;gBACN,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aAC3B;;YAED,IAAI,eAAA,CAAC,GAAA,EAAc,GAAG,EAAE;oBAAlB,UAAU;;gBACZ,OAAO,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;aACvD;;YAED,KAAK,gBAAA,CAAC,GAAA,EAAc,GAAG,EAAE;oBAAlB,UAAU;;gBACb,OAAO,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC;aACxD;;YAED,OAAO,kBAAA,CAAC,GAAA,EAAc,GAAG,EAAE;oBAAlB,UAAU;;gBACf,OAAO,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;aAC1D;;YAED,OAAO,kBAAA,CAAC,GAAA,EAAc,GAAG,EAAE;oBAAlB,UAAU;;gBACf,OAAO,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;aAC1D;;YAED,KAAK,gBAAA,GAAG;;;gBACJ,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI,EAAC,SAAGA,MAAI,CAAC,IAAI,CAAC,GAAA,CAAC,CAAC;aAC7E;;SAEJ;;QAED,SAAS,oBAAA,GAAG;YACR,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;;QAED,YAAY,uBAAA,GAAG;;;YACX,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI,EAAC,SAAG,KAAK,CAACA,MAAI,CAAC,IAAI,CAAC,CAAC,GAAA,CAAC,CAAC;SACjD;;QAED,MAAM,EAAE;;YAEJ;;gBAEI,IAAI,EAAE,kBAAkB;;gBAExB,EAAE,EAAE,GAAG;;gBAEP,OAAO,kBAAA,GAAG;oBACN,IAAI,GAAG,CAAC,MAAM,EAAE;wBACZ,IAAI,CAAC,IAAI,EAAE,CAAC;qBACf,MAAM;wBACH,IAAI,CAAC,KAAK,EAAE,CAAC;qBAChB;iBACJ;;aAEJ;;SAEJ;;QAED,MAAM,EAAE;;YAEJ,KAAK,gBAAA,GAAG;;;;gBAEJ,IAAI,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;gBAEtC,IAAI,QAAQ,CAAC,KAAK,IAAI,CAAC,EAAE;;oBAErB,IAAI,CAAC,IAAI,EAAE,CAAC;;oBAEZ,QAAQ,CAAC,IAAI;0BACP,QAAQ,CAAC,KAAK;0BACd,QAAQ,CAAC,OAAO;0BAChB,QAAQ,CAAC,OAAO;0BAChB,CAAC,CAAC;iBACX;;gBAED,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI,EAAC;;oBAEpB,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;oBAEhD,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,IAAG,GAAE,GAAE,MAAM,IAAK,MAAM,CAAC;;oBAEnD,IAAI,EAAE,GAAGA,MAAI,CAAC,IAAI,CAAC,CAAC;oBACpB,IAAI,EAAE,CAAC,WAAW,KAAK,MAAM,EAAE;wBAC3B,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;;wBAE1B,IAAI,MAAM,CAAC,MAAM,KAAK,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE;4BACtC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,GAAG,CAAC,YAAG,SAAG,eAAe,GAAA,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;yBACxD;;wBAED,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,CAAC,EAAE,SAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,KAAK,GAAA,CAAC,CAAC;qBACpE;;iBAEJ,CAAC,CAAC;;aAEN;;SAEJ;;QAED,OAAO,EAAE;;YAEL,KAAK,gBAAA,GAAG;;;;gBAEJ,IAAI,CAAC,IAAI,EAAE,CAAC;;gBAEZ,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;oBAChC,IAAI,CAAC,KAAK,EAAE,CAAC;oBACb,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,YAAG,SAAGA,MAAI,CAAC,KAAK,EAAE,GAAA,EAAE,IAAI,CAAC,CAAC;iBACtD;;aAEJ;;YAED,IAAI,eAAA,GAAG;;gBAEH,IAAI,IAAI,CAAC,KAAK,EAAE;oBACZ,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;iBACrB;;aAEJ;;SAEJ;;KAEJ,CAAC,CAAC;;IAEH,SAAS,WAAW,CAAC,IAAI,EAAE;;QAEvB,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;;QAE9B,OAAO;YACH,OAAA,KAAK;YACL,OAAO,EAAE,KAAK,GAAG,IAAI,GAAG,EAAE;YAC1B,OAAO,EAAE,KAAK,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE;YAC/B,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;YAClC,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;SACpC,CAAC;KACL;;CAEJ;;AAED,IAAI,CAAC,KAAO,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,KAAK,EAAE;IAC3D,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;CAC5B;;;;;;;;"}