{"version":3,"file":"grid-parallax","sources":["../../../src/js/components/grid-parallax.js"],"sourcesContent":["function plugin(UIkit) {\n\n    if (plugin.installed) {\n        return;\n    }\n\n    var {addClass, css, scrolledOver, toFloat} = UIkit.util;\n\n    UIkit.component('grid-parallax', UIkit.components.grid.extend({\n\n        props: {\n            target: String,\n            translate: Number\n        },\n\n        defaults: {\n            target: false,\n            translate: 150\n        },\n\n        computed: {\n\n            translate({translate}) {\n                return Math.abs(translate);\n            }\n\n        },\n\n        init() {\n            addClass(this.$el, 'uk-grid');\n        },\n\n        disconnected() {\n            this.reset();\n            css(this.$el, 'marginBottom', '');\n        },\n\n        update: [\n\n            {\n\n                read({rows}) {\n                    return {\n                        columns: rows && rows[0] && rows[0].length || 0,\n                        rows: rows && rows.map(elements => sortBy(elements, 'offsetLeft'))\n                    };\n                },\n\n                write({columns}) {\n                    css(this.$el, 'marginBottom', columns > 1\n                        ? this.translate + toFloat(css(css(this.$el, 'marginBottom', ''), 'marginBottom'))\n                        : '');\n                },\n\n                events: ['load', 'resize']\n            },\n\n            {\n\n                read() {\n                    return {scrolled: scrolledOver(this.$el) * this.translate};\n                },\n\n                write({rows, columns, scrolled}) {\n\n                    if (!rows || columns === 1 || !scrolled) {\n                        return this.reset();\n                    }\n\n                    rows.forEach(row =>\n                        row.forEach((el, i) =>\n                            css(el, 'transform', `translateY(${i % 2 ? scrolled : scrolled / 8}px)`)\n                        )\n                    );\n\n                },\n\n                events: ['scroll', 'load', 'resize']\n            }\n        ],\n\n        methods: {\n\n            reset() {\n                css(this.$el.children, 'transform', '');\n            }\n\n        }\n\n    }));\n\n    UIkit.component('grid-parallax').options.update.unshift({\n\n        read() {\n            this.reset();\n        },\n\n        events: ['load', 'resize']\n\n    });\n\n    function sortBy(collection, prop) {\n        return collection.sort((a, b) =>\n            a[prop] > b[prop]\n                ? 1\n                : b[prop] > a[prop]\n                    ? -1\n                    : 0\n        );\n    }\n\n}\n\nif (!BUNDLED && typeof window !== 'undefined' && window.UIkit) {\n    window.UIkit.use(plugin);\n}\n\nexport default plugin;\n"],"names":[],"mappings":"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"}