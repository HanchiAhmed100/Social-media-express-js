/*! UIkit 3.0.0-beta.42 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){if(!e.installed){var r=t.mixin,i=t.util,a=i.css,n=i.Dimensions,o=i.each,s=i.getImage,c=i.includes,u=i.isNumber,l=i.isUndefined,f=i.toFloat,p=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];r.parallax={props:p.reduce(function(e,t){return e[t]="list",e},{media:"media"}),defaults:p.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(e,t){var r=this;return p.reduce(function(i,n){if(l(e[n]))return i;var o,s,u,p=n.match(/color/i),d=p||"opacity"===n,h=e[n].slice(0);d&&a(t,n,""),h.length<2&&h.unshift(("scale"===n?1:d?a(t,n):0)||0);var g=c(h.join(""),"%")?"%":"px";if(p){var m=t.style.color;h=h.map(function(e){return a(a(t,"color",e),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return f(e)})}),t.style.color=m}else h=h.map(f);if(n.match(/^bg/))if(a(t,"background-position-"+n[2],""),s=a(t,"backgroundPosition").split(" ")["x"===n[2]?0:1],r.covers){var b=Math.min.apply(Math,h),v=Math.max.apply(Math,h),k=h.indexOf(b)<h.indexOf(v);u=v-b,h=h.map(function(e){return e-(k?b:v)}),o=(k?-u:0)+"px"}else o=s;return i[n]={steps:h,unit:g,pos:o,bgPos:s,diff:u},i},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(e,t){return function(e){var t=e.style.backgroundSize,r="cover"===a(a(e,"backgroundSize",""),"backgroundSize");return e.style.backgroundSize=t,r}(t)}},disconnected:function(){delete this._image},update:[{read:function(e){var t=this;if(e.active=!this.media||window.matchMedia(this.media).matches,e.image&&(e.image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),!("image"in e)&&this.covers&&this.bgProps.length){var r=a(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");r&&(e.image=!1,s(r).then(function(r){e.image={width:r.naturalWidth,height:r.naturalHeight},t.$emit()}))}},write:function(e){var t=this,r=e.image,i=e.active;if(r)if(i){var o=r.dimEl,s=n.cover(r,o);this.bgProps.forEach(function(e){var i=t.props[e],a=i.diff,c=i.bgPos,u=i.steps,l="bgy"===e?"height":"width",f=s[l]-o[l];if(c.match(/%$|0px/)){if(f<a)o[l]=s[l]+a-f;else if(f>a){var p=parseFloat(c);p&&(t.props[e].steps=u.map(function(e){return e-(f-a)/(100/p)}))}s=n.cover(r,o)}}),a(this.$el,{backgroundSize:s.width+"px "+s.height+"px",backgroundRepeat:"no-repeat"})}else a(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;o(this.getCss(0),function(t,r){return a(e.$el,r,"")})},getCss:function(e){var t=this.props,r=!1;return Object.keys(t).reduce(function(i,a){var n=t[a],o=n.steps,s=n.unit,c=n.pos,u=h(o,e);switch(a){case"x":case"y":if(r)break;var l=["x","y"].map(function(r){return a===r?u+s:t[r]?h(t[r].steps,e)+t[r].unit:0}),p=l[0],g=l[1];r=i.transform+=" translate3d("+p+", "+g+", 0)";break;case"rotate":i.transform+=" rotate("+u+"deg)";break;case"scale":i.transform+=" scale("+u+")";break;case"bgy":case"bgx":i["background-position-"+a[2]]="calc("+c+" + "+(u+s)+")";break;case"color":case"backgroundColor":case"borderColor":var m=d(o,e),b=m[0],v=m[1],k=m[2];i[a]="rgba("+b.map(function(e,t){return e+=k*(v[t]-e),3===t?f(e):parseInt(e,10)}).join(",")+")";break;case"blur":i.filter+=" blur("+u+"px)";break;case"hue":i.filter+=" hue-rotate("+u+"deg)";break;case"fopacity":i.filter+=" opacity("+u+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":i.filter+=" "+a+"("+u+"%)";break;default:i[a]=u}return i},{transform:"",filter:""})}}}}function d(e,t){var r=e.length-1,i=Math.min(Math.floor(r*t),r-1),a=e.slice(i,i+2);return a.push(1===t?1:t%(1/r)*r),a}function h(e,t){var r=d(e,t),i=r[0],a=r[1],n=r[2];return(u(i)?i+Math.abs(i-a)*n*(i<a?1:-1):+a).toFixed(2)}}"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e);function t(r){if(!t.installed){r.use(e);var i=r.mixin,a=r.util,n=a.clamp,o=a.css,s=a.scrolledOver,c=a.query;r.component("parallax",{mixins:[i.parallax],props:{target:String,viewport:Number,easing:Number},defaults:{target:!1,viewport:1,easing:1},computed:{target:function(e,t){var r=e.target;return r&&c(r,t)||t}},update:[{read:function(e){return{prev:e.percent,percent:(t=s(this.target)/(this.viewport||1),r=this.easing,n(t*(1-(r-r*t))))};var t,r},write:function(e,t){var r=e.prev,i=e.percent,a=e.active;"scroll"!==t.type&&(r=!1),a?r!==i&&o(this.$el,this.getCss(i)):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(t),t});